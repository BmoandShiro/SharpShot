version: '3.8'

services:
  sharpshot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: sharpshot-app
    # For Windows containers, we need to enable GUI
    isolation: process
    # Mount volumes for persistent data - use relative paths for cross-platform compatibility
    volumes:
      - ./output:/app/output
      - ./settings:/app/settings
    # Environment variables - use defaults that work across Windows systems
    environment:
      - DOTNET_ENVIRONMENT=Development
      - ASPNETCORE_ENVIRONMENT=Development
    # Run in interactive mode for development
    stdin_open: true
    tty: true
    # Command to build the application
    command: ["cmd", "/c", "dotnet build --configuration Release && dotnet publish --configuration Release --output /app/output --runtime win-x64 --self-contained false"] 